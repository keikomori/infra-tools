## ğŸ° RabbitMQ - Fila de Mensagens para Ambientes DistribuÃ­dos

O RabbitMQ Ã© um broker de mensagens robusto e amplamente utilizado em arquiteturas assÃ­ncronas baseadas em filas (AMQP). Nesta stack, o serviÃ§o Ã© configurado com SSL local, pronto para uso com Docker Swarm e Traefik.

---

### ğŸ¯ Objetivo

Fornecer um serviÃ§o de mensageria confiÃ¡vel e acessÃ­vel via HTTPS local com interface de gerenciamento, ideal para sistemas distribuÃ­dos, microserviÃ§os e integraÃ§Ã£o com workers e task queues.

---

### ğŸ§© Principais Funcionalidades

* Interface de administraÃ§Ã£o web (RabbitMQ Management)
* ComunicaÃ§Ã£o via AMQP (porta 5672) e HTTP (porta 15672)
* CompatÃ­vel com SSL local via Traefik
* Deploy em ambiente Docker Swarm

---

### ğŸ› ï¸ ConfiguraÃ§Ã£o (docker-compose.yml)

```yaml
services:
  rabbitmq:
    image: rabbitmq:3-management
    environment:
      - RABBITMQ_DEFAULT_USER=admin
      - RABBITMQ_DEFAULT_PASS=admin
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
    networks:
      - keiko_network
    deploy:
      restart_policy:
        condition: any
      placement:
        constraints:
          - node.role == manager
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.rabbitmq.rule=Host(`rabbitmq.infra.local`)"
      - "traefik.http.routers.rabbitmq.entrypoints=websecure"
      - "traefik.http.routers.rabbitmq.tls=true"
      - "traefik.http.services.rabbitmq.loadbalancer.server.port=15672"
      - "traefik.docker.network=keiko_network"
```

---

### ğŸ“ Estrutura de Arquivos

```
rabbitmq/
â”œâ”€â”€ docker-compose.yml     # Stack com RabbitMQ + Traefik
â””â”€â”€ README.md              # Este documento
```

---

### ğŸ” Certificados

Certificados SSL para acesso local com HTTPS, gerados com `mkcert`:

```bash
mkcert rabbitmq.infra.local
```

Arquivos `.pem` devem estar em `certs/` e serem montados no serviÃ§o do Traefik.

---

### ğŸŒ Acesso

| URL                                                          | DescriÃ§Ã£o                      |
| ------------------------------------------------------------ | ------------------------------ |
| [https://rabbitmq.infra.local](https://rabbitmq.infra.local) | Interface de administraÃ§Ã£o web |
| UsuÃ¡rio padrÃ£o                                               | `admin`                        |
| Senha padrÃ£o                                                 | `admin`                        |

---

### ğŸ“¦ Deploy

```bash
docker stack deploy -c docker-compose.yml rabbitmq
```

---

### ğŸ“ ObservaÃ§Ãµes

* A interface web roda na porta `15672`, exposta pelo Traefik via HTTPS.
* A porta `5672` para comunicaÃ§Ã£o AMQP nÃ£o precisa ser publicada externamente no Swarm, pois serÃ¡ usada via rede interna `keiko_network`.

---

### âœ… Requisitos

* Rede externa `keiko_network` criada.
* Certificados `.pem` vÃ¡lidos no diretÃ³rio `certs/`.
* Stack `traefik` funcionando corretamente com TLS.
